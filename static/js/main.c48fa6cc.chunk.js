(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{166:function(e,a,t){e.exports=t(446)},171:function(e,a,t){},173:function(e,a,t){},180:function(e,a,t){},185:function(e,a,t){},186:function(e,a,t){},187:function(e,a,t){},188:function(e,a,t){},446:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(87),c=t.n(s),i=t(12),l=(t(171),t(8)),o=t.n(l),u=t(64),m=t(21),p=t(31),d=t(32),h=t(34),b=t(33),f=t(35),g=t(22),v=(t(173),t(37)),E=t.n(v),w=(t(174),t(177),t(179),function(){var e=Object(m.a)(o.a.mark(function e(a,t){var n,r,s,c,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return n=N.doc("users/".concat(a.uid)),e.next=5,n.get();case 5:if((r=e.sent).exists){e.next=17;break}return s=a.displayName,c=a.email,i=new Date,e.prev=9,e.next=12,n.set(Object(u.a)({displayName:s,email:c,createdAt:i},t));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("error creating user",e.t0.message);case 17:return console.log(r),e.abrupt("return",n);case 19:case"end":return e.stop()}},e,null,[[9,14]])}));return function(a,t){return e.apply(this,arguments)}}());E.a.initializeApp({apiKey:"AIzaSyAcrthorfxqWbZK7G9KmJ2yeVICB5-G2sE",authDomain:"spark-diary.firebaseapp.com",databaseURL:"https://spark-diary.firebaseio.com",projectId:"spark-diary",storageBucket:"",messagingSenderId:"345284954297",appId:"1:345284954297:web:84abadcd3a4f0789"});var y=E.a.auth(),N=E.a.firestore(),O=new E.a.auth.GoogleAuthProvider;O.setCustomParameters({prompt:"select_account"});var C=function(){return y.signInWithPopup(O)},j=(E.a,t(180),function(e){var a=e.currentUser;return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"options"},r.a.createElement(i.c,{className:"option",to:"/capture"},"CAPTURE"),r.a.createElement(i.c,{className:"option",to:"/connect"},"CONNECT"),r.a.createElement(i.c,{className:"option",to:"/invent"},"INVENT"),r.a.createElement(i.c,{className:"option",to:"/tag-manager"},"TAG MANAGER"),a?r.a.createElement("div",{className:"option",onClick:function(){return y.signOut()}},"SIGN OUT"):r.a.createElement(i.c,{className:"option",to:"/signin"},"SIGN IN")))}),S=t(30),k=t(65),x=(t(185),function(e){var a=e.handleChange,t=e.label,n=Object(k.a)(e,["handleChange","label"]);return r.a.createElement("div",{className:"group"},r.a.createElement("input",Object.assign({className:"form-input",onChange:a},n)),t?r.a.createElement("label",{className:"".concat(n.value.length?"shrink":""," form-input-label")},t):null)}),I=(t(186),function(e){var a=e.children,t=e.isGoogleSignIn,n=Object(k.a)(e,["children","isGoogleSignIn"]);return r.a.createElement("button",Object.assign({className:"".concat(t?"google-sign-in":""," custom-button}")},n),a)}),A=(t(187),function(e){function a(e){var t;return Object(p.a)(this,a),(t=Object(h.a)(this,Object(b.a)(a).call(this,e))).handleSubmit=function(){var e=Object(m.a)(o.a.mark(function e(a){var n,r,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=t.state,r=n.email,s=n.password,e.prev=2,e.next=5,y.signInWithEmailAndPassword(r,s);case 5:t.setState({email:"",password:""}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[2,8]])}));return function(a){return e.apply(this,arguments)}}(),t.handleChange=function(e){var a=e.target,n=a.value,r=a.name;t.setState(Object(S.a)({},r,n))},t.state={email:"",password:""},t}return Object(f.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"sign-in"},r.a.createElement("h2",null,"I already have an account"),r.a.createElement("span",null,"Sign in with your email and password"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(x,{name:"email",type:"email",value:this.state.email,handleChange:this.handleChange,label:"email",required:!0}),r.a.createElement(x,{name:"password",type:"password",value:this.state.password,handleChange:this.handleChange,label:"password",required:!0}),r.a.createElement("div",{className:"buttons"},r.a.createElement(I,{type:"submit"}," Sign in"),r.a.createElement(I,{onClick:C,isGoogleSignIn:!0},"Sign in with Google"))))}}]),a}(r.a.Component)),P=function(e){function a(){var e;return Object(p.a)(this,a),(e=Object(h.a)(this,Object(b.a)(a).call(this))).handleSubmit=function(){var a=Object(m.a)(o.a.mark(function a(t){var n,r,s,c,i,l,u;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.preventDefault(),n=e.state,r=n.displayName,s=n.email,c=n.password,i=n.confirmPassword,c===i){a.next=5;break}return alert("passwords don't match"),a.abrupt("return");case 5:return a.prev=5,a.next=8,y.createUserWithEmailAndPassword(s,c);case 8:return l=a.sent,u=l.user,a.next=12,w(u,{displayName:r});case 12:e.setState({displayName:"",email:"",password:"",confirmPassword:""}),a.next=18;break;case 15:a.prev=15,a.t0=a.catch(5),console.error(a.t0);case 18:case"end":return a.stop()}},a,null,[[5,15]])}));return function(e){return a.apply(this,arguments)}}(),e.handleChange=function(a){var t=a.target,n=t.name,r=t.value;e.setState(Object(S.a)({},n,r))},e.state={displayName:"",email:"",password:"",confirmPassword:""},e}return Object(f.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this.state,a=e.displayName,t=e.email,n=e.password,s=e.confirmPassword;return r.a.createElement("div",{className:"sign-up"},r.a.createElement("h2",{className:"title"},"I do not have an account"),r.a.createElement("span",null,"Sign up with your email and password"),r.a.createElement("form",{className:"sign-up-form",onSubmit:this.handleSubmit},r.a.createElement(x,{type:"text",name:"displayName",value:a,onChange:this.handleChange,label:"DisplayName",required:!0}),r.a.createElement(x,{type:"text",name:"email",value:t,onChange:this.handleChange,label:"Email",required:!0}),r.a.createElement(x,{type:"password",name:"password",value:n,onChange:this.handleChange,label:"Password",required:!0}),r.a.createElement(x,{type:"password",name:"confirmPassword",value:s,onChange:this.handleChange,label:"Confirm Password",required:!0}),r.a.createElement(I,{type:"submit"},"SIGN UP")))}}]),a}(r.a.Component),G=(t(188),function(){return r.a.createElement("div",{className:"sign-in-and-sign-up"},r.a.createElement(A,null),r.a.createElement(P,null))}),U=(t(189),function(e){return r.a.createElement("div",null,"HOMEPAGE")}),q=function(e){function a(){var e;return Object(p.a)(this,a),(e=Object(h.a)(this,Object(b.a)(a).call(this))).unsubscribeFromAuth=null,e.state={currentUser:null},e}return Object(f.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeFromAuth=y.onAuthStateChanged(function(){var a=Object(m.a)(o.a.mark(function a(t){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=5;break}return a.next=3,w(t);case 3:a.sent.onSnapshot(function(a){e.setState({currentUser:Object(u.a)({id:a.id},a.data())},function(){console.log(e.state)})});case 5:e.setState({currentUser:t});case 6:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(i.b,{basename:"/"},r.a.createElement(j,{currentUser:this.state.currentUser}),r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/",component:U}),r.a.createElement(g.a,{path:"/signin",component:G}))))}}]),a}(r.a.Component);c.a.render(r.a.createElement(i.a,null,r.a.createElement(q,null)),document.getElementById("root"))}},[[166,1,2]]]);
//# sourceMappingURL=main.c48fa6cc.chunk.js.map